<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Pixel Hero">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%231a1a2e' width='32' height='32'/%3E%3Ccircle fill='%23ff6' cx='16' cy='18' r='8'/%3E%3Cpath fill='%23f80' d='M12 10h8v4h-8z'/%3E%3Cpath fill='%23f80' d='M14 14h4v6h-4z'/%3E%3Ccircle fill='%23fff' cx='14' cy='16' r='2'/%3E%3Ccircle fill='%23fff' cx='18' cy='16' r='2'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect fill='%231a1a2e' width='32' height='32'/%3E%3Ccircle fill='%23ff6' cx='16' cy='18' r='8'/%3E%3Cpath fill='%23f80' d='M12 10h8v4h-8z'/%3E%3Cpath fill='%23f80' d='M14 14h4v6h-4z'/%3E%3Ccircle fill='%23fff' cx='14' cy='16' r='2'/%3E%3Ccircle fill='%23fff' cx='18' cy='16' r='2'/%3E%3C/svg%3E">
    <title>Pixel Hero ARPG</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/panels.css">
    <link rel="stylesheet" href="css/inventory.css">
</head>
<body>
    <div id="gameContainer">
        <canvas id="game" width="960" height="1280"></canvas>
        <div id="ui">
            <div id="player-info">
                <div class="info-avatar-container">
                    <div class="avatar-hp-ring"></div>
                    <div class="avatar-mp-ring"></div>
                    <button id="characterBtn" class="info-avatar"><svg viewBox="0 0 24 24" width="24" height="24"><circle fill="%23ff6" cx="12" cy="10" r="8"/><circle fill="%23fff" cx="9" cy="9" r="2"/><circle fill="%23000" cx="9" cy="9" r="1"/><circle fill="%23fff" cx="15" cy="9" r="2"/><circle fill="%23000" cx="15" cy="9" r="1"/><path fill="%23f80" d="M8 14h8v3H8z"/></svg></button>
                </div>
                <div class="info-content">
                    <div class="info-header">
                        <div class="info-level">
                            <span class="level-icon"><svg viewBox="0 0 24 24" width="16" height="16"><circle fill="#ffd700" cx="12" cy="12" r="11"/><circle fill="#ffaa00" cx="12" cy="12" r="8"/><text x="12" y="16" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold">Lv</text></svg></span>
                            <span id="level">1</span>
                        </div>
                        <div class="info-gold">
                            <span class="gold-icon"><svg viewBox="0 0 24 24" width="14" height="14"><circle fill="#ffd700" cx="12" cy="12" r="10"/><text x="12" y="16" text-anchor="middle" fill="#ff6600" font-size="10" font-weight="bold">G</text></svg></span>
                            <span id="gold">0</span>
                        </div>
                    </div>
                    <div class="info-stats">
                        <span class="stat-hp">HP: <span id="hp-text">100/100</span></span>
                        <span class="stat-mp">MP: <span id="mp-text">50/50</span></span>
                    </div>
                </div>
            </div>
            
            <div id="game-buttons">
                <button id="saveBtn" class="icon-btn" style="display: none;"><svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4zm-5 16a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm3-10H5V5h10v4z"/></svg></button>
                <button id="languageToggle" class="icon-btn" style="display: none;">中</button>
                <button id="clearCacheBtn" class="icon-btn" title="清理缓存"><svg viewBox="0 0 32 32" width="20" height="20"><defs><linearGradient id="broom3D" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#b4843a"/><stop offset="30%" style="stop-color:#d4a45a"/><stop offset="70%" style="stop-color:#d4a45a"/><stop offset="100%" style="stop-color:#946420"/></linearGradient><linearGradient id="bristle3D" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#d4c4b4"/><stop offset="50%" style="stop-color:#e8d8c8"/><stop offset="100%" style="stop-color:#a49484"/></linearGradient></defs><path d="M15 2 L19 4 L17 16 L13 14 Z" fill="url(#broom3D)"/><ellipse cx="15" cy="20" rx="9" ry="7" fill="#a49484" transform="rotate(-15 15 20)"/><ellipse cx="15" cy="19" rx="8" ry="6" fill="url(#bristle3D)" transform="rotate(-15 15 19)"/><path d="M11 16 Q15 14 19 16 L18 24 Q15 26 12 24 Z" fill="#c4b4a4" opacity="0.6" transform="rotate(-15 15 20)"/></svg></button>
                <button id="controlModeBtn" class="icon-btn" title="当前模式: 方向键">⬡</button>
            </div>
            
            <!-- 虚拟摇杆 -->
            <div id="joystick-area">
                <div id="joystick-base">
                    <div id="joystick-knob"></div>
                </div>
            </div>
            
            <!-- 右上角按钮 -->
            <div id="corner-buttons">
                <button id="inventoryBtn" class="corner-btn">
                    <span class="btn-icon"><svg viewBox="0 0 32 32" width="30" height="30"><defs><linearGradient id="chestSide" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#946420"/><stop offset="50%" style="stop-color:#b4842a"/><stop offset="100%" style="stop-color:#7a5410"/></linearGradient><linearGradient id="chestTop" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#d4a44a"/><stop offset="100%" style="stop-color:#b4842a"/></linearGradient><linearGradient id="chestFront" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#c4943a"/><stop offset="100%" style="stop-color:#a4741a"/></linearGradient></defs><path d="M4 14 L8 10 L24 10 L28 14 L24 26 L8 26 Z" fill="url(#chestSide)"/><rect x="6" y="14" width="20" height="12" fill="url(#chestFront)"/><path d="M6 14 Q16 10 26 14 L26 10 Q16 6 6 10 Z" fill="url(#chestTop)"/><circle cx="16" cy="18" r="4" fill="#ffdd44"/><circle cx="16" cy="18" r="2.5" fill="#cc9900"/><circle cx="15" cy="17" r="1" fill="#ffee77"/></svg></span>
                    <span id="eq-count" class="btn-badge"></span>
                </button>
                <button id="shopBtn" class="corner-btn">
                    <span class="btn-icon"><svg viewBox="0 0 32 32" width="30" height="30"><defs><linearGradient id="shopWall" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#5a7a9a"/><stop offset="50%" style="stop-color:#7a9aba"/><stop offset="100%" style="stop-color:#4a6a8a"/></linearGradient><linearGradient id="shopRoof" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#8ab4cc"/><stop offset="100%" style="stop-color:#6a94ac"/></linearGradient><linearGradient id="shopWindow" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#cceeff"/><stop offset="100%" style="stop-color:#aaddee"/></linearGradient></defs><path d="M4 14 L7 8 L25 8 L28 14 L25 26 L7 26 Z" fill="url(#shopWall)"/><path d="M4 14 L7 8 L25 8 L28 14 L25 12 L7 12 Z" fill="url(#shopRoof)"/><rect x="8" y="16" width="16" height="10" rx="1" fill="url(#shopWindow)"/><rect x="11" y="10" width="10" height="4" rx="1" fill="#ff4444"/><text x="16" y="13" text-anchor="middle" fill="#fff" font-size="3" font-weight="bold">24H</text><rect x="8" y="18" width="16" height="1" fill="#88bbdd" opacity="0.5"/></svg></span>
                </button>
                <button id="bestiaryBtn" class="corner-btn">
                    <span class="btn-icon"><svg viewBox="0 0 24 24" width="30" height="30"><rect x="3" y="4" width="9" height="16" rx="1" fill="#b4945a"/><rect x="12" y="4" width="9" height="16" rx="1" fill="#d4b47a"/><rect x="3" y="4" width="9" height="16" rx="1" fill="none" stroke="#8a7a4a" stroke-width="0.5"/><rect x="12" y="4" width="9" height="16" rx="1" fill="none" stroke="#8a7a4a" stroke-width="0.5"/><rect x="12" y="4" width="1" height="16" fill="#6a5a3a"/><rect x="5" y="7" width="5" height="0.8" fill="#fff" opacity="0.7"/><rect x="5" y="10" width="5" height="0.8" fill="#fff" opacity="0.7"/><rect x="5" y="13" width="5" height="0.8" fill="#fff" opacity="0.7"/></svg></span>
                </button>
                <button id="skinBtn" class="corner-btn" title="切换皮肤">
                    <span class="btn-icon"><svg viewBox="0 0 24 24" width="30" height="30"><circle cx="12" cy="8" r="5" fill="#ffb6c1"/><ellipse cx="12" cy="16" rx="7" ry="6" fill="#fff"/><ellipse cx="12" cy="16" rx="7" ry="6" fill="none" stroke="#ddd" stroke-width="0.5"/><circle cx="10" cy="7" r="1" fill="#9932cc"/><circle cx="14" cy="7" r="1" fill="#9932cc"/><path d="M10 10 Q12 12 14 10" fill="none" stroke="#ffb6c1" stroke-width="1"/><ellipse cx="8" cy="12" rx="2" ry="4" fill="#8B4513" opacity="0.7"/><ellipse cx="16" cy="12" rx="2" ry="4" fill="#8B4513" opacity="0.7"/><path d="M6 3 L8 6 L10 4 L12 7 L14 4 L16 6 L18 3" fill="#ffd700" stroke="#daa520" stroke-width="0.5"/></svg></span>
                </button>
            </div>
            
            <!-- 技能栏 -->
            <div id="skills-container">
                <div id="skills"></div>
                <button id="joystick-attack" class="attack-btn">⚔️</button>
            </div>
            
            <div id="inventory-panel"></div>
            <div id="character-panel"></div>
            <div id="shop-panel"></div>
            <div id="bestiary-panel"></div>
            <div id="skin-panel" class="game-panel" style="display:none;">
                <div class="panel-header">
                    <h2>皮肤选择</h2>
                    <button class="close-btn">✕</button>
                </div>
                <div class="panel-content" id="skin-list"></div>
            </div>
            
            <div id="messages"></div>
            
            <div id="controls">
                <button id="up-left">↖</button>
                <button id="up">▲</button>
                <button id="up-right">↗</button>
                <button id="left">◀</button>
                <button class="attack-btn" id="attack">⚔️</button>
                <button id="right">▶</button>
                <button id="down-left">↙</button>
                <button id="down">▼</button>
                <button id="down-right">↘</button>
            </div>
        </div>
    </div>

    <script src="js/data/qualities.js"></script>
    <script src="js/data/consumables.js"></script>
    <script src="js/data/playerSkins.js"></script>
    <script src="js/data/items.js"></script>
    <script src="js/data/skills.js"></script>
    <script src="js/data/enemies.js"></script>
    <script src="js/data/world.js"></script>
    <script src="js/data/clouds.js"></script>
    <script src="js/data.js"></script>
    <script src="js/ui/panelManager.js"></script>
    <script src="js/ui/compare.js"></script>
    <script src="js/renderUtils.js"></script>
    <script src="js/ui/inventory.js"></script>
    <script src="js/ui/character.js"></script>
    <script src="js/ui/shop.js"></script>
    <script src="js/ui/bestiary.js"></script>
    <script src="js/ui/skinPanel.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/game.js"></script>
    
    <!-- 自定义确认弹窗 -->
    <div id="custom-confirm" class="custom-confirm-overlay" style="display: none;">
        <div class="custom-confirm-box">
            <div class="custom-confirm-title" id="confirm-title">确认</div>
            <div class="custom-confirm-message" id="confirm-message">确定要执行此操作吗？</div>
            <div class="custom-confirm-buttons">
                <button class="custom-confirm-cancel" id="confirm-cancel-btn">取消</button>
                <button class="custom-confirm-ok" id="confirm-ok-btn">确定</button>
            </div>
        </div>
    </div>
</body>
</html>
